<!--
	  PARAMETRES
-->
{$default_quality = get_ulille_quality_type($video_files)}
{$availablePlaySpeed = "[1, 1.5, 2]"}
{$video_files = sort_ulille_src($video_files)}
<!--    
	STREAMING INFO
	Pour une lecture HLS (streaming), le type a indiquer n'est pas le mÃªme :
	    <source src='{$file}' type="application/x-mpegURL">

	Plugin videoJS pour lecture de flux HLS :
	    <script src="{$baseurl}/player/videojs-contrib-hls.min.js"></script>
-->


  

  
<!--
	  PLAYER CSS
-->
<link href="{$ulille_player_url}/vjs6/video-js.css" rel="stylesheet">


<!--
	  PLUGIN CSS
-->
<link href="{$ulille_player_url}/node_modules/lvp-quality/videojs-lvp-quality.css" rel="stylesheet">
<link href="{$ulille_player_url}/node_modules/lvp-chapter/videojs-lvp-chapter.css" rel="stylesheet">



<!--
	  PLAYER
-->
{if $development_mode}
<script src="{$ulille_player_url}/vjs/video.js"></script>
{else}
<script src="{$ulille_player_url}/vjs6/video.min.js"></script>
{/if}  


<script src="{$ulille_player_url}/video_js_custom.js"></script>



<!--
	  PLAYER PLUGIN
-->
<script src="{$ulille_player_url}/node_modules/lvp-quality/videojs-lvp-quality.min.js"></script>
<script src="{$ulille_player_url}/node_modules/lvp-chapter/videojs-lvp-chapter.min.js"></script>
<script src="{$ulille_player_url}/node_modules/lvp-startat/videojs-lvp-startat.min.js"></script>

<!--
	  PLAYER FLASH ALTERNATIVE
-->
<script>
    videojs.options.flash.swf = "{$ulille_player_url}/node_modules/video.js/dist/video-js.swf";
</script>

<!--
	  LANGUAGE
-->
<script src="{$ulille_player_url}/vjs6/lang_fr.js"></script>

<!--
	  BALISE VIDEO HTML 5
-->
<video id="cb_video_js" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto" height="{$height}" width="{$width}" poster="{getThumb vdetails=$vdata size=768x432}">

    {foreach $video_files as $file}
	    {$quality = get_ulille_quality($file)}

	    {if $flv_vid == true}
		<source src='{$file}' type="video/x-flv" />
	    {else}
		<source src='{$file}' type="video/mp4" label="{strtoupper($quality)}" res="{$quality}" />
	    {/if}
    {/foreach}

    {ANCHOR place="getVTTFile"}
    {ANCHOR place="getSubtitleVtt"}
    {ANCHOR place="play_def_sub"}

    <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
</video>

<!--
	  CONFIGURATION PLAYER
-->
<script type="text/javascript">
	var default_res = "{$default_quality}";
	var availablePlaySpeed = {$availablePlaySpeed};
</script>

{literal}
<script type="text/javascript">
    var player = videojs('cb_video_js', {
        LoadingSpinner: true,
        BigPlayButton: true,
        controlBar: {
            muteToggle: false
        }
    });

    player.lvpQuality({
        sources: [
        {/literal}{foreach $video_files as $file}{$quality = get_ulille_quality($file)}
            { name: '{strtoupper($quality)}', src: '{$file}', type: {if $flv_vid == true}'video/x-flv'{else}'video/mp4'{/if} },
        {/foreach}{literal}
        ],
        default: default_res
    });
    player.lvpChapter();
    player.lvpStartAt();
</script>
{/literal}




<!--
	  STYLE PLAYER
-->
<style type="text/css">
	.video-js {
		width: 100%;
	}
	.video-js .vjs-tech {
		height: 100% !important;
	}
	.editorpick .cb_video_js-dimensions{
		width: 100% !important;
		height: 100% !important;
	}
        
        .video-js .vjs-time-control{ display: none; }
        .video-js .vjs-current-time, .video-js .vjs-time-divider, .video-js .vjs-duration{ display: block; padding: 0 5px; }
        .video-js .vjs-time-divider{ padding: 0 2px; min-width: auto; }
        .video-js .vjs-duration{ padding-right: 10px; }
</style>

